<!DOCTYPE html>
<html lang=zh>
  <head>
    <title>Junk Bank System</title>
    <%= favicon_link_tag asset_path('bank.png') %>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css", integrity: "sha256-aAr2Zpq8MZ+YA/D6JtRD3xtrwpEz2IqOS+pWD/7XKIw=", crossorigin: :anonymous %>
    <%= stylesheet_link_tag "https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css", crossorigin: :anonymous %>
    <%= stylesheet_link_tag 'application', media: :all %>
    <%= yield :head %>
  </head>

  <body class="d-flex flex-column min-vh-100">
    <nav class="navbar navbar-expand-md navbar-light shadow-sm">
      <%= link_to root_url, class: 'navbar-brand' do %>
        <%= image_tag "bank.svg", data: { svg_fallback: asset_path('bank.svg') }, style: 'font-size: 1.33333em; width: 1.25em; height: 1em; vertical-align: -0.225em;' %>
        <%# site_name %>
        JB 银行
      <% end %>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbar-content">
        <ul class="navbar-nav mr-auto">
          <% navbar_models.each do |model, icon| %>
            <li class="nav-item <%= active_page url_for model %>">
              <%= link_to url_for(model), class: 'nav-link' do %>
                <i class="fas fa-fw fa-<%= icon %>"></i>
                <%= model.display_name %>
              <% end %>
            </li>
          <% end %>

          <li class="nav-item <%= active_page stats_path %>">
            <%= link_to stats_path, class: 'nav-link' do %>
              <i class="fas fa-fw fa-chart-area"></i>
              统计
            <% end %>
          </li>
        </ul>
        <ul class="navbar-nav my-2 my-md-0">
          <li class="nav-item">
            <%= link_to 'https://github.com/iBug/Junk-Bank-System', class: 'nav-link d-none d-lg-block' do %>
              <i class="fab fa-fw fa-github"></i>
              GitHub
            <% end %>
          </li>
        </ul>
      </div>
    </nav>
    <div class="initial-content flex-grow-1 my-3 my-md-4 container px-sm-0">
      <% unless alert.nil? %>
        <div id="alert" class="alert alert-danger"><%= alert %></div>
      <% end %>
      <% unless notice.nil? %>
        <div id="notice" class="alert alert-primary"><%= notice %></div>
      <% end %>

      <%= yield %>
    </div>
    <footer class="footer shadow py-3 py-md-4 border-top">
      <div class="container px-sm-0">
        <p class="text-muted">
        <a href="https://github.com/iBug/Junk-Bank-System">Junk Bank System</a>, Copyright &copy; 2020-<%= Time.now.strftime '%Y' %> <a href="https://github.com/iBug">iBug</a>
        </p>
      </div>
    </footer>

    <%# Optional scripts %>
    <%# jQuery, Popper.js, Bootstrap, Rails UJS, Font Awesome, Vue.js %>
    <%= javascript_include_tag "https://cdn.jsdelivr.net/npm/vue@2.6.11/dist/vue.min.js", integrity: "sha256-ngFW3UnAN0Tnm76mDuu7uUtYEcG3G5H1+zioJw3t+68=", crossorigin: "anonymous" %>
    <%= javascript_include_tag "https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js", integrity: "sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=", crossorigin: "anonymous", async: true %>
    <%= javascript_include_tag "https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.bundle.min.js", integrity: "sha256-Xt8pc4G0CdcRvI0nZ2lRpZ4VHng0EoUDMlGcBSQ9HiQ=", crossorigin: "anonymous", async: true %>
    <%= javascript_include_tag "https://cdn.jsdelivr.net/npm/jquery-ujs@1.2.2/src/rails.min.js", crossorigin: "anonymous", async: true %>
    <%# javascript_include_tag "https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/js/all.min.js", crossorigin: "anonymous", async: true %>
    <%= javascript_include_tag "https://cdn.jsdelivr.net/npm/chartkick@3.2.0/dist/chartkick.min.js", integrity: "sha256-QQ42jSsvKp0SDBvW+xRjHWfK2I4ObL37tEF4+l8a0qg=", crossorigin: :anonymous, async: true %>
    <%= javascript_include_tag "https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js", integrity: "sha256-R4pqcOYV8lt7snxMQO/HSbVCFRPMdrhAFMH+vr9giYI=", crossorigin: :anonymous, async: true %>
    <%= yield :body_after %>
  </body>
</html>
